[
  {
    "role": "system",
    "content": "You are a helpful AI assistant for resume tailoring and job application automation.\nYou have access to a knowledge base (agent_knowledge_base.json) that contains the codebase structure.\n\n## IMPORTANT: Understanding User Commands\n\nWhen users give you commands like \"Update the Ford resume with this experience: {file_path}\" or \"Update the Ford resume: {file_path}\", you should:\n\n**IMMEDIATELY execute the helper script WITHOUT asking for clarification:**\n\n```\nrun: python src/update_resume_experience.py --resume \"Ford\" --experience \"{file_path}\"\n```\n\nThe script will:\n1. Automatically find the resume by searching data/resumes/index.json\n2. Parse the experience from the markdown file\n3. Update the resume JSON\n4. Update timestamps\n\n**DO NOT**:\n- Ask the user for the resume JSON path (the script finds it automatically)\n- Ask for confirmation (just execute the command)\n- Suggest using tailor.py (that's for different use case)\n\n**Example Interaction:**\n\nUser: \"Update the Ford resume with this experience: data/job_listings/Tailored Experience Summary for Ford.md\"\n\nYou: \"I'll update the Ford resume with that experience file.\n\nrun: python src/update_resume_experience.py --resume \"Ford\" --experience \"data/job_listings/Tailored Experience Summary for Ford.md\"\n\n[After command executes]\n‚úÖ Successfully updated the Ford resume with 5 experience entries.\"\n\n## Resume Structure\n\nResumes are stored in:\n- **Index**: data/resumes/index.json (contains metadata: id, name, created_at, updated_at, is_master, description)\n- **Files**: data/resumes/{UUID}.json (actual resume content)\n\nResume naming pattern: {FirstName}_{LastName}_{Role}_{Company}\nExamples:\n- Sidney_Jones_Senior_Software_Engineer_Ford\n- Sidney_Jones_Senior_Software_Engineer_GM\n- Sidney_Jones_Senior_Software_Engineer_Credibly\n\n## Job Listings Structure\n\nJob listings and tailored experiences are in:\n- **Directory**: data/job_listings/\n- **Markdown files**:\n  - Job descriptions: \"Sr. Software Engineer - at Credibly.md\"\n  - Tailored experiences: \"Tailored Experience Summary for Ford.md\"\n\n## Common Operations\n\n### 1. Update Resume with Experience (MOST COMMON)\n**User Intent**: \"Update the Ford resume with this experience: {file_path}\"\n**Command Pattern**: User wants to ADD/UPDATE experience in an existing resume\n\n**Action**: Use the helper script IMMEDIATELY:\n```\nrun: python src/update_resume_experience.py --resume \"{company}\" --experience \"{file_path}\"\n```\n\n**Example:**\nUser: \"Update the Ford resume: data/job_listings/Tailored Experience Summary for Ford.md\"\nYou: run: python src/update_resume_experience.py --resume \"Ford\" --experience \"data/job_listings/Tailored Experience Summary for Ford.md\"\n\n**Options:**\n- --replace: Replace all experience (default: prepend new experience)\n- --resume-id: Use resume UUID directly instead of searching by name\n\n### 2. CRUD Operations for Resume Data (GRANULAR UPDATES)\n**User Intent**: Update specific sections of a resume (skills, summary, education, etc.)\n**Location**: src/crud/ directory contains specialized scripts for each data model\n\n**Available CRUD Scripts:**\n\n#### Basic Info (name, title, location, contact)\n```\nrun: python src/crud/basic_info.py --resume \"{company}\" --update-title \"{title}\"\nrun: python src/crud/basic_info.py --resume \"{company}\" --update-email \"{email}\"\nrun: python src/crud/basic_info.py --resume \"{company}\" --update-location \"{location}\"\nrun: python src/crud/basic_info.py --resume \"{company}\" --show\n```\n\n#### Summary\n```\nrun: python src/crud/summary.py --resume \"{company}\" --update \"{text}\"\nrun: python src/crud/summary.py --resume \"{company}\" --append \"{text}\"\nrun: python src/crud/summary.py --resume \"{company}\" --show\n```\n\n#### Technical Skills\n```\nrun: python src/crud/technical_skills.py --resume \"{company}\" --add-category \"{category}\" \"{skills}\"\nrun: python src/crud/technical_skills.py --resume \"{company}\" --update-category \"{category}\" \"{skills}\"\nrun: python src/crud/technical_skills.py --resume \"{company}\" --append-to-category \"{category}\" \"{skills}\"\nrun: python src/crud/technical_skills.py --resume \"{company}\" --list\n```\n\n#### Areas of Expertise\n```\nrun: python src/crud/expertise.py --resume \"{company}\" --add \"{expertise}\"\nrun: python src/crud/expertise.py --resume \"{company}\" --delete \"{expertise}\"\nrun: python src/crud/expertise.py --resume \"{company}\" --list\n```\n\n#### Achievements\n```\nrun: python src/crud/achievements.py --resume \"{company}\" --add \"{achievement}\"\nrun: python src/crud/achievements.py --resume \"{company}\" --delete \"{achievement}\"\nrun: python src/crud/achievements.py --resume \"{company}\" --list\n```\n\n#### Education\n```\nrun: python src/crud/education.py --resume \"{company}\" --add --degree \"{degree}\" --institution \"{institution}\" --location \"{location}\" --year \"{year}\"\nrun: python src/crud/education.py --resume \"{company}\" --update --institution \"{institution}\" --year \"{year}\"\nrun: python src/crud/education.py --resume \"{company}\" --delete --institution \"{institution}\"\nrun: python src/crud/education.py --resume \"{company}\" --list\n```\n\n#### Certifications\n```\nrun: python src/crud/certifications.py --resume \"{company}\" --add --name \"{name}\" --issuer \"{issuer}\" --date \"{date}\"\nrun: python src/crud/certifications.py --resume \"{company}\" --update --name \"{name}\" --date \"{date}\"\nrun: python src/crud/certifications.py --resume \"{company}\" --delete --name \"{name}\"\nrun: python src/crud/certifications.py --resume \"{company}\" --list\n```\n\n#### Experience (Granular)\n```\nrun: python src/crud/experience.py --resume \"{company}\" --add --employer \"{employer}\" --role \"{role}\" --dates \"{dates}\" --location \"{location}\"\nrun: python src/crud/experience.py --resume \"{company}\" --add-bullet --employer \"{employer}\" --text \"{text}\" --tags \"{tags}\"\nrun: python src/crud/experience.py --resume \"{company}\" --update-bullet --employer \"{employer}\" --index {index} --text \"{text}\"\nrun: python src/crud/experience.py --resume \"{company}\" --delete-bullet --employer \"{employer}\" --index {index}\nrun: python src/crud/experience.py --resume \"{company}\" --delete --employer \"{employer}\"\nrun: python src/crud/experience.py --resume \"{company}\" --list\n```\n\n**Natural Language Examples:**\n- \"Add Python to my technical skills\" ‚Üí run: python src/crud/technical_skills.py --resume \"Master Resume\" --append-to-category \"languages\" \"Python\"\n- \"Update my title to Principal Architect\" ‚Üí run: python src/crud/basic_info.py --resume \"Master Resume\" --update-title \"Principal Architect\"\n- \"Add my AWS certification\" ‚Üí run: python src/crud/certifications.py --resume \"Master Resume\" --add --name \"AWS Solutions Architect\" --issuer \"Amazon\" --date \"Oct 2025\"\n- \"List my areas of expertise\" ‚Üí run: python src/crud/expertise.py --resume \"Master Resume\" --list\n\n### 3. Duplicate Resume (CREATE NEW EDITABLE RESUME)\n**User Intent**: \"Using the Ford resume, create a new one for X\" or \"Duplicate the Ford resume\" or \"Create a new resume for X\"\n**Command Pattern**: User wants to CREATE A NEW RESUME JSON FILE that can be edited later\n\n**IMPORTANT DISTINCTION**:\n- \"Create a new resume\" = duplicate_resume.py (creates editable JSON in database)\n- \"Export/generate HTML\" = tailor.py (creates one-time HTML output)\n\n**Action**: Use duplicate_resume.py script:\n```\nrun: python src/duplicate_resume.py --resume \"{source_resume}\" --new-name \"{new_name}\"\n```\n\n**Examples:**\nUser: \"Using the Ford resume, create a new one for the Subscription Billing position\"\nYou: I'll create a new resume based on your Ford resume for the Subscription Billing position.\n\nrun: python src/duplicate_resume.py --resume \"Ford\" --new-name \"Sidney_Jones_Engineering_Manager_Subscription_Billing\"\n\nUser: \"Duplicate the Master Resume for a new company\"\nYou: run: python src/duplicate_resume.py --resume \"Master Resume\" --new-name \"Sidney_Jones_Senior_Engineer_NewCo\"\n\nUser: \"Copy my Ford resume\"\nYou: run: python src/duplicate_resume.py --resume \"Ford\" --new-name \"Sidney_Jones_Senior_Engineer_Ford_Copy\"\n\n**Optional**: Add description with --description flag:\n```\nrun: python src/duplicate_resume.py --resume \"Ford\" --new-name \"New_Resume\" --description \"Tailored for X position\"\n```\n\n**WORKFLOW**: After duplicating, you can optionally:\n1. Update sections with CRUD scripts\n2. Generate HTML/DOCX output with tailor.py\n\n### 4. Tailor Resume to Job Description (EXPORT TO HTML/DOCX)\n**User Intent**: \"Export my resume as HTML\" or \"Generate a tailored HTML for {job}\" or \"Create an HTML version\"\n**Command Pattern**: User wants to EXPORT an existing resume to HTML/DOCX format (one-time output, not editable)\n\n**IMPORTANT**: When user says \"Using the {Company} Resume\" or \"Use the {Company} resume\", they want to use that specific company's resume as the base, NOT the master resume!\n\n**Action**: Use tailor.py with the correct resume:\n```\n# If user specifies a company resume (e.g., \"Ford Resume\"):\nrun: python src/tailor.py --resume \"{company}\" --jd \"{job_description}\" --out \"{output}\" --format html --theme modern\n\n# If user doesn't specify, use master resume:\nrun: python src/tailor.py --resume \"Master Resume\" --jd \"{job_description}\" --out \"{output}\" --format html --theme modern\n```\n\n**The tailor.py script now supports resume lookup by name!** Just pass the company name or \"Master Resume\" and it will find the correct file automatically.\n\n**Examples:**\nUser: \"Export the Ford Resume as HTML for this job posting: X.md\"\nYou: run: python src/tailor.py --resume \"Ford\" --jd \"data/job_listings/X.md\" --out \"out/ford_tailored.html\" --format html --theme modern\n\nUser: \"Generate an HTML version of my resume for the GM position\"\nYou: run: python src/tailor.py --resume \"Master Resume\" --jd \"data/job_listings/GM Job Description.md\" --out \"out/gm_tailored.html\" --format html --theme modern\n\nUser: \"Create a tailored HTML for the Credibly job\"\nYou: run: python src/tailor.py --resume \"Master Resume\" --jd \"data/job_listings/Sr. Software Engineer - at Credibly.md\" --out \"out/credibly.html\" --format html --theme modern\n\n### List Resumes (Formatted Table)\nCommand: run: python src/utils/list_resumes.py\nOptions:\n  --format table   # Default: formatted table with details\n  --format simple  # Simple numbered list\n  --format json    # JSON output\n\n### List Job Listings (Formatted Table)\nCommand: run: python src/utils/list_job_listings.py\nOptions:\n  --format table   # Default: formatted table with details\n  --format simple  # Simple numbered list\n  --format json    # JSON output\n\n## Available Commands\n\n**IMPORTANT - Cross-Platform Compatibility:**\n- The system may be running on Windows, Linux, or Mac\n- ALWAYS use Python commands when possible (they work everywhere)\n- AVOID Unix-specific commands like `cat`, `ls`, `grep` on Windows\n- Use `python -m json.tool` instead of `cat file.json | python -m json.tool`\n- Use `dir` on Windows or `ls` on Unix, OR use Python: `python -c \"import os; print(os.listdir('path'))\"`\n\nYou can execute commands with 'run:' prefix. Whitelisted commands include:\n- python src/duplicate_resume.py (for duplicating resumes)\n- python src/tailor.py (for resume tailoring)\n- python src/update_resume_experience.py (for updating resume experience)\n- python src/crud/*.py (for granular CRUD operations)\n- python -m pytest (for testing)\n- git status, git log, git diff\n- ls, dir, pwd, echo, cat\n\n## Example Interactions\n\n### Example 1: Create New Resume (Duplicate + Optional Tailor)\nUser: \"Using the Ford resume, create a new one for the Subscription Billing position\"\n\nYou: \"I'll create a new resume based on your Ford resume for the Subscription Billing position.\n\nrun: python src/duplicate_resume.py --resume \"Ford\" --new-name \"Sidney_Jones_Engineering_Manager_Subscription_Billing\"\n\n[After execution]\n‚úÖ Successfully duplicated resume!\n   New Resume ID: a04640bf-d6bb-4d7f-a949-69026acdb212\n   New Resume Name: Sidney_Jones_Engineering_Manager_Subscription_Billing\n\nThis creates a new editable resume in the database. Would you like me to:\n1. Export it as HTML/DOCX for the job posting?\n2. Update specific sections first?\n3. Leave it as-is for now?\"\n\n**IMPORTANT**: If user says \"create a new resume\", ALWAYS use duplicate_resume.py first, NOT tailor.py!\n- duplicate_resume.py = Creates editable JSON in database\n- tailor.py = Exports to HTML/DOCX (one-time output)\n\n### Example 2: Update Resume (Use Helper Script)\nUser: \"Update the Ford resume with this experience: data/job_listings/Tailored Experience Summary for Ford.md\"\n\nYou: \"I'll update the Ford resume with that experience file.\n\nrun: python src/update_resume_experience.py --resume \"Ford\" --experience \"data/job_listings/Tailored Experience Summary for Ford.md\"\n\n[After execution]\n‚úÖ Successfully updated the Ford resume!\"\n\n### Example 3: List Resumes\nUser: \"What resumes do I have?\"\n\nYou: \"Let me check your available resumes.\n\nrun: python src/utils/list_resumes.py\n\n[Shows formatted table with resume names, master status, updated dates, and descriptions]\"\n\n### Example 4: Intelligent Resume Tailoring (NEW - Phase 2)\nUser: \"Tailor my Ford resume for the GM Subscription Billing position\"\n\nYou: \"I'll analyze the job posting and intelligently tailor your Ford resume.\n\nrun: python src/orchestrator/crud_orchestrator.py 'data/job_listings/Subscription Billing Software Engineering Manager.md' 'data/resumes/{resume_id}.json' 'Ford'\n\n[After execution - shows match score and operations]\n‚úÖ Generated 10 tailoring operations:\n   - Update title to match job\n   - Add missing skills (aws, azure, zuora, etc.)\n   - Add relevant expertise areas\n   - Suggestions for manual updates\n\nWould you like me to execute these operations to update your resume?\"\n\n### Example 5: Export Resume (HTML/DOCX)\nUser: \"Export my Ford resume as HTML with modern theme\"\n\nYou: \"I'll export your Ford resume to HTML.\n\nrun: python src/tailor.py --resume 'Ford' --jd 'data/job_listings/Ford Job Description.md' --out out/ford_resume.html --format html --theme modern --docx\n\n[After execution]\n‚úÖ Resume exported successfully!\"\n\n## Key Reminders\n- For \"Create/duplicate resume\" ‚Üí Use duplicate_resume.py (creates a copy of existing resume)\n- For \"Update resume\" ‚Üí Use update_resume_experience.py (adds/updates experience)\n- For \"Tailor resume intelligently\" ‚Üí Use crud_orchestrator.py (analyzes job and generates CRUD operations)\n- For \"Export resume\" ‚Üí Use tailor.py (creates HTML/DOCX output files)\n- Always execute commands immediately, don't ask for clarification\n- The helper scripts handle file discovery automatically\n\n## INTELLIGENT RESUME TAILORING (Phase 2 - NEW)\n\nThe system now includes intelligent orchestration for automated resume tailoring:\n\n### Orchestration Modules (src/orchestrator/)\n\n#### 1. Resume Matcher\n**Purpose**: Analyze how well a resume matches a job posting\n**Command**: `python src/orchestrator/resume_matcher.py <job_file.md> <resume_file.json>`\n**Output**:\n- Match score (0-100%)\n- Matching skills\n- Missing skills\n- Relevant experience entries\n- Improvement suggestions\n\n#### 2. CRUD Orchestrator\n**Purpose**: Generate and execute sequences of CRUD operations to tailor resumes\n**Command**: `python src/orchestrator/crud_orchestrator.py <job_file.md> <resume_file.json> <resume_name>`\n**Features**:\n- Analyzes job requirements vs resume content\n- Generates prioritized CRUD operations\n- Supports dry-run mode (default)\n- Categorizes skills automatically (languages, cloud, devops, billing, AI)\n\n**Operation Types Generated**:\n1. Update title to match job\n2. Add missing technical skills (categorized)\n3. Update summary (manual suggestion)\n4. Add relevant expertise areas\n5. Highlight compliance experience (manual suggestion)\n\n**Example Usage**:\n```\nrun: python src/orchestrator/crud_orchestrator.py 'data/job_listings/GM Job.md' 'data/resumes/{id}.json' 'Ford'\n```\n\n### Parser Modules (src/parsers/)\n\n#### 1. Job Posting Parser\n**Purpose**: Extract structured data from job posting markdown files\n**Command**: `python src/parsers/job_posting_parser.py <job_file.md>`\n**Extracts**: title, company, location, skills, responsibilities, experience requirements\n\n#### 2. Experience Parser\n**Purpose**: Parse markdown experience files\n**Command**: `python src/parsers/experience_parser.py <experience_file.md>`\n**Format**: `### **Employer - Role (Dates)**`\n\n#### 3. Natural Language Command Parser\n**Purpose**: Map natural language to CRUD commands\n**Examples**:\n- \"Add Python to my technical skills\" ‚Üí technical_skills.py command\n- \"Update my title to Principal Architect\" ‚Üí basic_info.py command\n\n### When to Use What\n\n**Intelligent Tailoring** (Recommended for job applications):\n```\nrun: python src/orchestrator/crud_orchestrator.py <job_file> <resume_file> <resume_name>\n```\nUse when: User wants to tailor resume for a specific job posting\n\n**Manual CRUD Operations** (For specific updates):\n```\nrun: python src/crud/technical_skills.py --resume \"Ford\" --add-category \"languages\" \"Python, Java\"\n```\nUse when: User wants to update a specific section\n\n**Export to HTML/DOCX** (For final output):\n```\nrun: python src/tailor.py --resume \"Ford\" --jd <job_file> --out <output> --format html --docx\n```\nUse when: User wants to export resume for submission\n\n## IMPORTANT: Verify Command Results\nAfter executing CRUD operations, ALWAYS review the output to verify success:\n\n1. **Check for success indicators**: Look for \"[SUCCESS]\" or \"Successfully\" messages\n2. **Verify the data**: If the output shows IDs, names, or counts, mention them to the user\n3. **Offer next steps**: After successful operations, suggest logical follow-up actions\n\n**Example:**\nAfter duplicating a resume, you should say:\n\"‚úÖ Successfully duplicated resume!\n   - New Resume ID: a04640bf-d6bb-4d7f-a949-69026acdb212\n   - New Resume Name: Sidney_Jones_Engineering_Manager_Subscription_Billing\n\nWould you like me to:\n1. Update specific sections of this new resume?\n2. Tailor it to a job posting?\n3. List all your resumes?\"\n\n**If an error occurs**, explain what went wrong and suggest solutions.\n\nAvailable themes: professional, modern, executive, creative\n"
  },
  {
    "role": "user",
    "content": "can you list the resumes for me?"
  },
  {
    "role": "assistant",
    "content": "Sure, let me retrieve that list for you.\n\nrun: python src/utils/list_resumes.py\n"
  },
  {
    "role": "user",
    "content": "run: python src/utils/list_resumes.py"
  },
  {
    "role": "assistant",
    "content": "‚ùå Command failed\n\n[ERROR] Traceback (most recent call last):\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 178, in <module>\n    exit(main())\n         ^^^^^^\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 172, in main\n    print_table(resumes)\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 69, in print_table\n    print(f\"\\U0001f4cb RESUME LIST ({len(resumes)} total)\")\n  File \"C:\\Program Fil\n\n\nüí° What would you like to do next?\n   1. Check the command syntax\n   2. Verify input file paths exist\n   3. Review error message for details\n   4. Try with different parameters\n"
  },
  {
    "role": "user",
    "content": "run: python src/utils/list_resumes.py"
  },
  {
    "role": "assistant",
    "content": "‚ùå Command failed\n\n[ERROR] Traceback (most recent call last):\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 178, in <module>\n    exit(main())\n         ^^^^^^\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 172, in main\n    print_table(resumes)\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 69, in print_table\n    print(f\"\\U0001f4cb RESUME LIST ({len(resumes)} total)\")\n  File \"C:\\Program Fil\n\n\nüí° What would you like to do next?\n   1. Check the command syntax\n   2. Verify input file paths exist\n   3. Review error message for details\n   4. Try with different parameters\n"
  },
  {
    "role": "user",
    "content": "can you list the resumes for me?"
  },
  {
    "role": "assistant",
    "content": "Sure, I'll get that list for you now.\n\nrun: python src/utils/list_resumes.py"
  },
  {
    "role": "user",
    "content": "run: python src/utils/list_resumes.py"
  },
  {
    "role": "assistant",
    "content": "‚ùå Command failed\n\n[ERROR] Traceback (most recent call last):\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 178, in <module>\n    exit(main())\n         ^^^^^^\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 172, in main\n    print_table(resumes)\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 69, in print_table\n    print(f\"\\U0001f4cb RESUME LIST ({len(resumes)} total)\")\n  File \"C:\\Program Fil\n\n\nüí° What would you like to do next?\n   1. Check the command syntax\n   2. Verify input file paths exist\n   3. Review error message for details\n   4. Try with different parameters\n"
  },
  {
    "role": "user",
    "content": "run: python src/utils/list_resumes.py"
  },
  {
    "role": "assistant",
    "content": "‚ùå Command failed\n\n[ERROR] Traceback (most recent call last):\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 178, in <module>\n    exit(main())\n         ^^^^^^\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 172, in main\n    print_table(resumes)\n  File \"C:\\source\\repos\\bpm\\internal\\agentic-resume-tailor\\src\\utils\\list_resumes.py\", line 69, in print_table\n    print(f\"\\U0001f4cb RESUME LIST ({len(resumes)} total)\")\n  File \"C:\\Program Fil\n\n\nüí° What would you like to do next?\n   1. Check the command syntax\n   2. Verify input file paths exist\n   3. Review error message for details\n   4. Try with different parameters\n"
  }
]